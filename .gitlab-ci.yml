# .gitlab-ci.yml
image: registry.gitlab.com/softinio/hugo-docker

production:
  type: deploy
  script:
  - hugo
  - aws s3 sync public/ s3://$AWS_BUCKET
  - aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_DISTRIBUTION_ID --paths "/*"
  artifacts:
    paths:
    - public
  only:
  - master

